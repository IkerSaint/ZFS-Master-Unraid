Menu="Utilities"
Title="ZFS Master"
Icon="zfs.master.png"
Tag="zfs.master.png"
---
<?php
$plugin = "zfs.master";

require_once "$docroot/plugins/$plugin/include/ZFSMHelpers.php";

$zfsm_cfg = loadConfig(parse_plugin_cfg($plugin, true), false);

?>
   
<form markdown="1" name="<?=$plugin?>_settings" method="POST" action="/update.php" target="progressFrame">
<input type="hidden" name="#file" value="zfs.master/zfs.master.cfg"/>
<input type="hidden" name="#section" value="general"/>
<div id="title" class="nocontrol">_(General Settings)_</div>
_(Refresh Interval)_:
: <select id="refresh_interval" name="refresh_interval" size="1">
	<?=mk_option($zfsm_cfg['refresh_interval'], "30", _('30 seconds'))?>
	<?=mk_option($zfsm_cfg['refresh_interval'], "45", _('45 seconds'))?>
	<?=mk_option($zfsm_cfg['refresh_interval'], "60", _('60 seconds'))?>
	<?=mk_option($zfsm_cfg['refresh_interval'], "120", _('120 seconds'))?>
	<?=mk_option($zfsm_cfg['refresh_interval'], "300", _('300 seconds'))?>
  </select>
  
:zc_settings_refresh_interval_plug:
> How often the information gets updated.
:end

_(Destructive Mode)_:
: <select name="destructive_mode">
	<?=mk_option($zfsm_cfg['destructive_mode'], "0", _('No'))?>
	<?=mk_option($zfsm_cfg['destructive_mode'], "1", _('Yes'))?>
  </select>
  
:zc_settings_destructive_mode_plug:
> + Set to **Yes** to enable additional options for Pools and Datasets.
> + Set to **No** to disable additional options for Pools Datasets.
:end

<div id="title" class="nocontrol">_(Datasets)_</div>
_(Datasets Exclussion Patterns (One per line))_:
: <textarea name="exclussion" cols="40" rows="5" placeholder="/^tank\/dockerfiles\/.*/
/^tank\/downloads\/myhiddendataset\/.*/"><?=$zfsm_cfg['dataset_exclussion']?></textarea>

:zc_settings_datasets_exclussion_plug:
> Regular expression (With the start and end backslash) to be used for datasets listing exclussion. Dataset descendants and snapshots also will be excluded.
> This could speed up the Information refresh process.
:end

<div id="title" class="nocontrol">_(Snapshots)_</div>
_(Snapshots Icon Alert Max Days)_:
: <input type="text" name="snap_max_days_alert" value="<?=$zfsm_cfg['snap_max_days_alert']?>">

:zc_settings_datasets_exclussion_plug:
> Maximum days old for Snapshots before the icon color in the main UI changes to orange.
:end

_(Snapshots Pattern)_:
: <input type="text" name="snap_pattern" value="<?=$zfsm_cfg['snap_pattern']?>" placeholder="default Y-m-d-His">

:zc_settings_snapshots_pattern_plug:
> Pattern for the name of the snapshots taken through the interface eg: pattern:"Y-m-d-His" snapshot name: "tank/my_dataset@2022-04-13-171920".
> Reference https://www.php.net/manual/en/function.date.php
:end

_(Snapshots Prefix (Do not include the '@'))_:
: <input type="text" name="snap_refix" value="<?=$zfsm_cfg['snap_prefix']?>" placeholder="default blank">

:zc_settings_snapshots_prefix_plug:
> Prefix for the name of the snapshots taken through the interface eg: pattern:"Y-m-d-His", prefix:"zfs-master-" snapshot name: "tank/my_dataset@zfs-master-2022-04-13-171920".
:end

&nbsp;
: <input type="submit" name="#apply" value="_(Apply)_" disabled><input type="button" value="_(Done)_" onclick="done()">
</form>